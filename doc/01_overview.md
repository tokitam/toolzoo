# toolzoo プラグイン 詳細設計書

## 1. 概要

### 1.1 プラグイン名
toolzoo

### 1.2 目的
WordPress向けの便利ツール集を提供するプラグイン。ショートコードを使用して記事やページに各種ツールを埋め込むことができる。

### 1.3 機能一覧
1. パスワード生成機能 (`toolzoo_password`)
2. 年号表示機能 (`toolzoo_nengo`)

### 1.4 技術要件
- WordPress 5.0以上
- PHP 7.4以上
- JavaScript (Vanilla JS または jQuery)
- CSS3

### 1.5 対応ブラウザ
- Chrome (最新版)
- Firefox (最新版)
- Safari (最新版)
- Edge (最新版)

## 2. プラグイン構成

### 2.1 ディレクトリ構造
```
toolzoo/
├── toolzoo.php              # メインプラグインファイル
├── README.md                # プラグイン説明
├── doc/                     # 詳細設計ドキュメント
│   ├── 01_overview.md       # 概要・アーキテクチャ
│   ├── 02_password.md       # パスワード生成機能仕様
│   └── 03_nengo.md          # 年号表示機能仕様
├── includes/                # PHPクラスファイル
│   ├── class-toolzoo.php    # メインクラス
│   ├── class-password-generator.php
│   └── class-nengo-converter.php
├── assets/                  # 静的ファイル
│   ├── css/
│   │   ├── password.css
│   │   └── nengo.css
│   └── js/
│       ├── password.js
│       └── nengo.js
└── languages/               # 翻訳ファイル (将来対応)
    └── toolzoo-ja.po
```

### 2.2 アーキテクチャ

#### 2.2.1 クラス構成
```
Toolzoo (メインクラス)
├── Password_Generator (パスワード生成)
└── Nengo_Converter (年号変換)
```

#### 2.2.2 処理フロー
1. プラグイン有効化時
   - ショートコードを登録
   - スタイル・スクリプトをエンキュー

2. ショートコード呼び出し時
   - 対応する機能クラスを呼び出し
   - HTMLを生成して返却
   - 必要なCSS/JSを読み込み

3. クライアント側処理
   - ユーザー操作に応じてJavaScriptで動的処理
   - サーバーサイド処理は不要（全てフロントエンド完結）

### 2.3 セキュリティ考慮事項
- ショートコード出力時のエスケープ処理
- nonceを使用したフォーム保護（必要に応じて）
- XSS対策（esc_html, esc_attr使用）
- CSRFトークンの実装（データ送信が発生する場合）

### 2.4 パフォーマンス考慮事項
- CSS/JSは各ショートコードが使用されているページでのみ読み込み
- ミニファイ版のアセット提供を検討
- CDN使用の検討（フォントアイコンなど）

## 3. 開発フェーズ

### Phase 1: 基盤構築
- プラグイン基本構造の作成
- メインクラスの実装
- ショートコード登録機構

### Phase 2: パスワード生成機能
- UI/UXデザイン
- フロントエンド実装
- テスト

### Phase 3: 年号表示機能
- UI/UXデザイン
- フロントエンド実装
- テスト

### Phase 4: 統合テスト・リリース準備
- 全体テスト
- ドキュメント整備
- WordPress.orgへの登録準備

## 4. 今後の拡張性
- 新機能追加の容易性を考慮した設計
- 管理画面の追加（設定画面）
- 多言語対応
- ウィジェット対応
- ブロックエディタ（Gutenberg）対応
